<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:behaviors="using:BacpacGUI.App.Behaviors"
        xmlns:vm="using:BacpacGUI.App.ViewModels"
        x:DataType="vm:MainWindowViewModel"
        mc:Ignorable="d"
        d:DesignWidth="1160"
        d:DesignHeight="860"
        MinWidth="1020"
        MinHeight="760"
        Width="1160"
        Height="860"
        x:Class="BacpacGUI.App.MainWindow"
        Icon="/Assets/app-icon-512.png"
        Title="Bacpac GUI"
        ExtendClientAreaToDecorationsHint="True"
        ExtendClientAreaChromeHints="PreferSystemChrome">
    <Window.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#FFF5EBDD" Offset="0.0" />
            <GradientStop Color="#FFE6F3F1" Offset="0.52" />
            <GradientStop Color="#FFDDEAF7" Offset="1.0" />
        </LinearGradientBrush>
    </Window.Background>
    <Window.Styles>
        <Style Selector="Button">
            <Setter Property="CornerRadius" Value="10" />
            <Setter Property="Padding" Value="14,8" />
            <Setter Property="FontWeight" Value="SemiBold" />
        </Style>
        <Style Selector="Button.primary">
            <Setter Property="Background" Value="#FF0F7A69" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="BorderBrush" Value="#FF0C6659" />
            <Setter Property="BorderThickness" Value="1" />
        </Style>
        <Style Selector="Button.primary:pointerover">
            <Setter Property="Background" Value="#FF0C6659" />
        </Style>
        <Style Selector="Button.secondary">
            <Setter Property="Background" Value="#FFF2F8FF" />
            <Setter Property="Foreground" Value="#FF20466F" />
            <Setter Property="BorderBrush" Value="#FFC9DDF4" />
            <Setter Property="BorderThickness" Value="1" />
        </Style>
        <Style Selector="Button.secondary:pointerover">
            <Setter Property="Background" Value="#FFE8F1FC" />
        </Style>
        <Style Selector="Button.neutral">
            <Setter Property="Background" Value="#FFF7F8FA" />
            <Setter Property="Foreground" Value="#FF445066" />
            <Setter Property="BorderBrush" Value="#FFD5DCE7" />
            <Setter Property="BorderThickness" Value="1" />
        </Style>
        <Style Selector="Button.neutral:pointerover">
            <Setter Property="Background" Value="#FFEEF2F7" />
        </Style>
        <Style Selector="Button.icon">
            <Setter Property="Width" Value="42" />
            <Setter Property="Height" Value="36" />
            <Setter Property="Padding" Value="0" />
            <Setter Property="Background" Value="#FFF2F8FF" />
            <Setter Property="BorderBrush" Value="#FFC9DDF4" />
            <Setter Property="BorderThickness" Value="1" />
        </Style>
        <Style Selector="Button.compact">
            <Setter Property="Padding" Value="10,6" />
            <Setter Property="FontSize" Value="12" />
        </Style>
        <Style Selector="Border.statusChip">
            <Setter Property="Background" Value="#FFF2F8FF" />
            <Setter Property="BorderBrush" Value="#FFC9DDF4" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="CornerRadius" Value="999" />
            <Setter Property="Padding" Value="10,4" />
        </Style>
    </Window.Styles>

    <Grid RowDefinitions="Auto,*" Margin="24">
        <Border Grid.Row="0"
                Background="#CFFFFFFF"
                BorderBrush="#40FFFFFF"
                BorderThickness="1"
                CornerRadius="18"
                Padding="20"
                BoxShadow="0 14 36 0 #220F172A"
                Margin="0,0,0,18">
            <Grid ColumnDefinitions="*,Auto" ColumnSpacing="20">
                <StackPanel Spacing="6">
                    <TextBlock Text="Bacpac GUI"
                               FontSize="30"
                               FontWeight="Bold"
                               Foreground="#FF12233A" />
                    <TextBlock Text="Backup and restore SQL Server databases with a cleaner, guided workflow."
                               FontSize="14"
                               Foreground="#CC1F2A44" />
                </StackPanel>

                <Border Grid.Column="1"
                        VerticalAlignment="Center"
                        Background="#FFF0F7F4"
                        BorderBrush="#FFE1EEE8"
                        BorderThickness="1"
                        CornerRadius="999"
                        Padding="12,6">
                    <TextBlock Text="In-Process DacFx"
                               FontSize="12"
                               FontWeight="SemiBold"
                               Foreground="#FF1D6B57" />
                </Border>
            </Grid>
        </Border>

        <Border Grid.Row="1"
                Background="#D9FFFFFF"
                BorderBrush="#54FFFFFF"
                BorderThickness="1"
                CornerRadius="20"
                Padding="18"
                BoxShadow="0 18 48 0 #1F0F172A">
            <TabControl>
                <TabItem Header="Backup">
                    <ScrollViewer VerticalScrollBarVisibility="Auto"
                                  HorizontalScrollBarVisibility="Disabled">
                        <Grid RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,*"
                              ColumnDefinitions="Auto,*"
                              RowSpacing="14"
                              ColumnSpacing="14"
                              Margin="8">
                        <TextBlock Grid.Row="0"
                                   Grid.Column="0"
                                   VerticalAlignment="Center"
                                   Text="SQL Server"
                                   FontWeight="SemiBold" />
                        <TextBox Grid.Row="0"
                                 Grid.Column="1"
                                 MinHeight="36"
                                 Text="{Binding Backup.Server, Mode=TwoWay}"
                                 Watermark="localhost,1433 or myserver.database.windows.net" />

                        <TextBlock Grid.Row="1"
                                   Grid.Column="0"
                                   VerticalAlignment="Center"
                                   Text="Username"
                                   FontWeight="SemiBold" />
                        <TextBox Grid.Row="1"
                                 Grid.Column="1"
                                 MinHeight="36"
                                 Text="{Binding Backup.Username, Mode=TwoWay}"
                                 Watermark="sql_login" />

                        <TextBlock Grid.Row="2"
                                   Grid.Column="0"
                                   VerticalAlignment="Center"
                                   Text="Password"
                                   FontWeight="SemiBold" />
                        <TextBox Grid.Row="2"
                                 Grid.Column="1"
                                 MinHeight="36"
                                 PasswordChar="*"
                                 Text="{Binding Backup.Password, Mode=TwoWay}"
                                 Watermark="password" />

                        <TextBlock Grid.Row="3"
                                   Grid.Column="0"
                                   VerticalAlignment="Center"
                                   Text="Database"
                                   FontWeight="SemiBold" />
                        <Grid Grid.Row="3"
                              Grid.Column="1"
                              ColumnDefinitions="*,Auto"
                              ColumnSpacing="10">
                            <ComboBox Grid.Column="0"
                                      MinHeight="36"
                                      ItemsSource="{Binding Backup.Databases}"
                                      SelectedItem="{Binding Backup.SelectedDatabase, Mode=TwoWay}"
                                      PlaceholderText="Load databases first" />
                            <Button Grid.Column="1"
                                    MinWidth="140"
                                    Classes="secondary"
                                    Content="Load Databases"
                                    Command="{Binding Backup.LoadDatabasesCommand}" />
                        </Grid>

                        <TextBlock Grid.Row="4"
                                   Grid.Column="0"
                                   VerticalAlignment="Center"
                                   Text="Output File"
                                   FontWeight="SemiBold" />
                        <Grid Grid.Row="4"
                              Grid.Column="1"
                              ColumnDefinitions="*,Auto"
                              ColumnSpacing="10">
                            <TextBox Grid.Column="0"
                                     MinHeight="36"
                                     Text="{Binding Backup.OutputPath, Mode=TwoWay}"
                                     Watermark="/path/to/backup.bacpac" />
                            <Button Grid.Column="1"
                                    Classes="icon"
                                    Command="{Binding Backup.BrowseOutputPathCommand}"
                                    ToolTip.Tip="Choose folder and auto-generate output filename">
                                <TextBlock Text="ðŸ“" FontSize="16" HorizontalAlignment="Center" VerticalAlignment="Center" />
                            </Button>
                        </Grid>

                        <StackPanel Grid.Row="5"
                                    Grid.Column="1"
                                    Orientation="Horizontal"
                                    Spacing="10">
                            <Button Content="Start Backup"
                                    MinWidth="130"
                                    Classes="primary"
                                    Command="{Binding Backup.StartBackupCommand}" />
                            <Button Content="Cancel"
                                    MinWidth="90"
                                    Classes="neutral"
                                    Command="{Binding Backup.CancelBackupCommand}"
                                    IsVisible="{Binding Backup.IsRunning}" />
                            <Border Classes="statusChip"
                                    VerticalAlignment="Center">
                                <TextBlock Text="{Binding Backup.StatusMessage}"
                                           FontWeight="SemiBold"
                                           Foreground="#FF20466F" />
                            </Border>
                        </StackPanel>

                        <ProgressBar Grid.Row="6"
                                     Grid.Column="1"
                                     Height="8"
                                     IsIndeterminate="True"
                                     IsVisible="{Binding Backup.IsRunning}" />

                        <Border Grid.Row="7"
                                Grid.Column="0"
                                Grid.ColumnSpan="2"
                                IsVisible="{Binding Backup.IsBackupCompleted}"
                                Background="#FFDCF7E8"
                                BorderBrush="#FF9FDEBC"
                                BorderThickness="1"
                                CornerRadius="12"
                                Padding="14,12">
                            <Grid ColumnDefinitions="Auto,*" ColumnSpacing="10">
                                <TextBlock Text="âœ“"
                                           FontSize="26"
                                           FontWeight="Bold"
                                           Foreground="#FF157347"
                                           VerticalAlignment="Center" />
                                <StackPanel Grid.Column="1" Spacing="2">
                                    <TextBlock Text="Backup Complete"
                                               FontSize="17"
                                               FontWeight="Bold"
                                               Foreground="#FF0F5A37" />
                                    <TextBlock Text="{Binding Backup.CompletionMessage}"
                                               Foreground="#FF1E5E42"
                                               TextWrapping="Wrap" />
                                    <Button Content="Open Output Folder"
                                            Margin="0,8,0,0"
                                            HorizontalAlignment="Left"
                                            Classes="secondary compact"
                                            Command="{Binding Backup.OpenOutputFolderCommand}" />
                                </StackPanel>
                            </Grid>
                        </Border>

                        <Border Grid.Row="8"
                                Grid.Column="0"
                                Grid.ColumnSpan="2"
                                BorderThickness="1"
                                CornerRadius="12"
                                Padding="12"
                                BorderBrush="#FFDCE6F2"
                                Background="#EAF8FAFF">
                            <Grid RowDefinitions="Auto,*" RowSpacing="8">
                                <Grid Grid.Row="0" ColumnDefinitions="*,Auto,Auto,Auto" ColumnSpacing="8">
                                    <TextBlock Text="Live Operation Log"
                                               VerticalAlignment="Center"
                                               FontWeight="SemiBold"
                                               Foreground="#FF1A3556" />
                                    <Button Grid.Column="1"
                                            Content="Open Folder"
                                            Classes="secondary compact"
                                            Command="{Binding Backup.OpenOutputFolderCommand}" />
                                    <Button Grid.Column="2"
                                            Content="Copy"
                                            Classes="secondary compact"
                                            Command="{Binding Backup.CopyLogsCommand}" />
                                    <Button Grid.Column="3"
                                            Content="Clear"
                                            Classes="neutral compact"
                                            Command="{Binding Backup.ClearLogsCommand}" />
                                </Grid>
                                <TextBox Grid.Row="1"
                                         Height="210"
                                         IsReadOnly="True"
                                         AcceptsReturn="True"
                                         TextWrapping="Wrap"
                                         Text="{Binding Backup.LogOutput}"
                                         behaviors:TextBoxAutoScrollBehavior.AutoScrollToEnd="True" />
                            </Grid>
                        </Border>
                        </Grid>
                    </ScrollViewer>
                </TabItem>

                <TabItem Header="Restore">
                    <ScrollViewer VerticalScrollBarVisibility="Auto"
                                  HorizontalScrollBarVisibility="Disabled">
                        <Grid RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,*"
                              ColumnDefinitions="Auto,*"
                              RowSpacing="14"
                              ColumnSpacing="14"
                              Margin="8">
                            <TextBlock Grid.Row="0"
                                       Grid.Column="0"
                                       VerticalAlignment="Center"
                                       Text="Bacpac File"
                                       FontWeight="SemiBold" />
                            <Grid Grid.Row="0"
                                  Grid.Column="1"
                                  ColumnDefinitions="*,Auto"
                                  ColumnSpacing="10">
                                <TextBox Grid.Column="0"
                                         MinHeight="36"
                                         Text="{Binding Restore.BacpacPath, Mode=TwoWay}"
                                         Watermark="/path/to/backup.bacpac" />
                                <Button Grid.Column="1"
                                        Classes="icon"
                                        Command="{Binding Restore.BrowseBacpacPathCommand}"
                                        ToolTip.Tip="Choose bacpac file">
                                    <TextBlock Text="ðŸ“„" FontSize="16" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                </Button>
                            </Grid>

                            <TextBlock Grid.Row="1"
                                       Grid.Column="0"
                                       VerticalAlignment="Center"
                                       Text="SQL Server"
                                       FontWeight="SemiBold" />
                            <TextBox Grid.Row="1"
                                     Grid.Column="1"
                                     MinHeight="36"
                                     Text="{Binding Restore.Server, Mode=TwoWay}"
                                     Watermark="localhost,1433 or myserver.database.windows.net" />

                            <TextBlock Grid.Row="2"
                                       Grid.Column="0"
                                       VerticalAlignment="Center"
                                       Text="Username"
                                       FontWeight="SemiBold" />
                            <TextBox Grid.Row="2"
                                     Grid.Column="1"
                                     MinHeight="36"
                                     Text="{Binding Restore.Username, Mode=TwoWay}"
                                     Watermark="sql_login" />

                            <TextBlock Grid.Row="3"
                                       Grid.Column="0"
                                       VerticalAlignment="Center"
                                       Text="Password"
                                       FontWeight="SemiBold" />
                            <TextBox Grid.Row="3"
                                     Grid.Column="1"
                                     MinHeight="36"
                                     PasswordChar="*"
                                     Text="{Binding Restore.Password, Mode=TwoWay}"
                                     Watermark="password" />

                            <TextBlock Grid.Row="4"
                                       Grid.Column="0"
                                       VerticalAlignment="Center"
                                       Text="Target Mode"
                                       FontWeight="SemiBold" />
                            <CheckBox Grid.Row="4"
                                      Grid.Column="1"
                                      Content="Create a new database"
                                      IsChecked="{Binding Restore.CreateNewDatabase, Mode=TwoWay}" />

                            <TextBlock Grid.Row="5"
                                       Grid.Column="0"
                                       VerticalAlignment="Center"
                                       IsVisible="{Binding Restore.IsExistingDatabaseMode}"
                                       Text="Existing DB"
                                       FontWeight="SemiBold" />
                            <Grid Grid.Row="5"
                                  Grid.Column="1"
                                  IsVisible="{Binding Restore.IsExistingDatabaseMode}"
                                  ColumnDefinitions="*,Auto"
                                  ColumnSpacing="10">
                                <ComboBox Grid.Column="0"
                                          MinHeight="36"
                                          ItemsSource="{Binding Restore.Databases}"
                                          SelectedItem="{Binding Restore.SelectedDatabase, Mode=TwoWay}"
                                          PlaceholderText="Load databases first" />
                                <Button Grid.Column="1"
                                        MinWidth="140"
                                        Classes="secondary"
                                        Content="Load Databases"
                                        Command="{Binding Restore.LoadDatabasesCommand}" />
                            </Grid>

                            <TextBlock Grid.Row="6"
                                       Grid.Column="0"
                                       VerticalAlignment="Center"
                                       IsVisible="{Binding Restore.CreateNewDatabase}"
                                       Text="New DB Name"
                                       FontWeight="SemiBold" />
                            <TextBox Grid.Row="6"
                                     Grid.Column="1"
                                     IsVisible="{Binding Restore.CreateNewDatabase}"
                                     MinHeight="36"
                                     Text="{Binding Restore.NewDatabaseName, Mode=TwoWay}"
                                     Watermark="my_restored_database" />

                            <StackPanel Grid.Row="7"
                                        Grid.Column="1"
                                        Orientation="Horizontal"
                                        Spacing="10">
                                <Button Content="Start Restore"
                                        MinWidth="130"
                                        Classes="primary"
                                        Command="{Binding Restore.StartRestoreCommand}" />
                                <Button Content="Cancel"
                                        MinWidth="90"
                                        Classes="neutral"
                                        Command="{Binding Restore.CancelRestoreCommand}"
                                        IsVisible="{Binding Restore.IsRunning}" />
                                <Border Classes="statusChip"
                                        VerticalAlignment="Center">
                                    <TextBlock Text="{Binding Restore.StatusMessage}"
                                               FontWeight="SemiBold"
                                               Foreground="#FF20466F" />
                                </Border>
                            </StackPanel>

                            <ProgressBar Grid.Row="8"
                                         Grid.Column="1"
                                         Height="8"
                                         IsIndeterminate="True"
                                         IsVisible="{Binding Restore.IsRunning}" />

                            <Border Grid.Row="9"
                                    Grid.Column="0"
                                    Grid.ColumnSpan="2"
                                    IsVisible="{Binding Restore.IsRestoreCompleted}"
                                    Background="#FFDCF7E8"
                                    BorderBrush="#FF9FDEBC"
                                    BorderThickness="1"
                                    CornerRadius="12"
                                    Padding="14,12">
                                <Grid ColumnDefinitions="Auto,*" ColumnSpacing="10">
                                    <TextBlock Text="âœ“"
                                               FontSize="26"
                                               FontWeight="Bold"
                                               Foreground="#FF157347"
                                               VerticalAlignment="Center" />
                                    <StackPanel Grid.Column="1" Spacing="2">
                                        <TextBlock Text="Restore Complete"
                                                   FontSize="17"
                                                   FontWeight="Bold"
                                                   Foreground="#FF0F5A37" />
                                        <TextBlock Text="{Binding Restore.CompletionMessage}"
                                                   Foreground="#FF1E5E42"
                                                   TextWrapping="Wrap" />
                                        <Button Content="Open Bacpac Folder"
                                                Margin="0,8,0,0"
                                                HorizontalAlignment="Left"
                                                Classes="secondary compact"
                                                Command="{Binding Restore.OpenBacpacFolderCommand}" />
                                    </StackPanel>
                                </Grid>
                            </Border>

                            <Border Grid.Row="10"
                                    Grid.Column="0"
                                    Grid.ColumnSpan="2"
                                    BorderThickness="1"
                                    CornerRadius="12"
                                    Padding="12"
                                    BorderBrush="#FFDCE6F2"
                                    Background="#EAF8FAFF">
                                <Grid RowDefinitions="Auto,*" RowSpacing="8">
                                    <Grid Grid.Row="0" ColumnDefinitions="*,Auto,Auto,Auto" ColumnSpacing="8">
                                        <TextBlock Text="Live Operation Log"
                                                   VerticalAlignment="Center"
                                                   FontWeight="SemiBold"
                                                   Foreground="#FF1A3556" />
                                        <Button Grid.Column="1"
                                                Content="Open Folder"
                                                Classes="secondary compact"
                                                Command="{Binding Restore.OpenBacpacFolderCommand}" />
                                        <Button Grid.Column="2"
                                                Content="Copy"
                                                Classes="secondary compact"
                                                Command="{Binding Restore.CopyLogsCommand}" />
                                        <Button Grid.Column="3"
                                                Content="Clear"
                                                Classes="neutral compact"
                                                Command="{Binding Restore.ClearLogsCommand}" />
                                    </Grid>
                                    <TextBox Grid.Row="1"
                                             Height="260"
                                             IsReadOnly="True"
                                             AcceptsReturn="True"
                                             TextWrapping="Wrap"
                                             Text="{Binding Restore.LogOutput}"
                                             behaviors:TextBoxAutoScrollBehavior.AutoScrollToEnd="True" />
                                </Grid>
                            </Border>
                        </Grid>
                    </ScrollViewer>
                </TabItem>
            </TabControl>
        </Border>
    </Grid>
</Window>
